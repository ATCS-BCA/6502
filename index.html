<html>

<head>
	<title>Login</title>
	<link rel="shortcut icon" href="frontend/images/icons/favicon.ico">
</head>

<body>

	<div id="logged-in">
		You are logged in as <span id="login-name"></span>.
		<button id="log-out">Log out</button>
	</div>
	<div id="logged-out">
		You are not logged in.
		<button>Log in</button>
	</div>


	<script src="frontend/js/jquery.min.js"></script>
	<script src="http://ajax.aspnetcdn.com/ajax/mobileservices/MobileServices.Web-1.2.7.min.js"></script>


	<script>
		$(document).ready(function () {
			
			var client = new WindowsAzure.MobileServiceClient(
    "https://ide6502.azure-mobile.net/",
    "QekgXgsjXlzmhYhjfEhxyySyblCoHg86"
);
				function refreshAuthDisplay() {
    var isLoggedIn = client.currentUser !== null;
    $("#logged-in").toggle(isLoggedIn);
    $("#logged-out").toggle(!isLoggedIn);

    if (isLoggedIn) {
        console.log("http://6502.azurewebsites.net/frontend/index?id=" + client.currentUser.userId);
        window.location.replace = ("http://6502.azurewebsites.net/frontend/index?id=" + client.currentUser.userId);
    }
}

function logIn() {
    client.login("google").then(refreshAuthDisplay, function(error){
        alert(error);
    });
	

}

function logOut() {
    client.logout();
    refreshAuthDisplay();
    $('#summary').html('<strong>You must login to access data.</strong>');
}

// On page init, fetch the data and set up event handlers
$(function () {
    refreshAuthDisplay();
    $('#summary').html('<strong>You must login to access data.</strong>');          
    $("#logged-out button").click(logIn);
    $("#logged-in button").click(logOut);
});
			});
	</script>
	
	
</body>

</html>